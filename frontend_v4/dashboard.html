<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>FaceGourd - Mask Detection Dashboard</title>
  <meta name="description" content="Real-time mask detection monitoring system using YOLO" />
  <link rel="stylesheet" href="dashboard.css" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
</head>

<body class="dark">
  <div class="dashboard">
    <!-- Header -->
    <header class="header">
      <div class="header-content">
        <div class="header-left">
          <h1>FaceGourd Dashboard</h1>
          <p class="subtitle">Mask Detection Monitoring System</p>
        </div>
        <button class="theme-toggle" id="themeToggle" aria-label="Toggle theme">
          <svg class="sun-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="5"></circle>
            <line x1="12" y1="1" x2="12" y2="3"></line>
            <line x1="12" y1="21" x2="12" y2="23"></line>
            <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
            <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
            <line x1="1" y1="12" x2="3" y2="12"></line>
            <line x1="21" y1="12" x2="23" y2="12"></line>
            <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
            <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
          </svg>
          <svg class="moon-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
          </svg>
        </button>
      </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
      <!-- Top Section -->
      <div class="grid grid-2">
        <!-- Detection Viewer -->
        <div class="card">
          <div class="card-header">
            <h2>Live Detection Feed</h2>
          </div>
          <div class="card-content">
            <div class="tabs">
              <button class="tab active" data-tab="image">Image</button>
              <button class="tab" data-tab="video">Video</button>
              <button class="tab" data-tab="live">Live</button>
            </div>

            <!-- Image Upload -->
            <div class="tab-content active" id="image-tab">
              <input type="file" id="imageInput" accept="image/*" style="display:none;">
              <button class="btn btn-outline full-width" onclick="document.getElementById('imageInput').click()">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                  <polyline points="17 8 12 3 7 8"></polyline>
                  <line x1="12" y1="3" x2="12" y2="15"></line>
                </svg>
                Upload Image
              </button>
            </div>

            <!-- Video Upload -->
            <div class="tab-content" id="video-tab">
              <input type="file" id="videoInput" accept="video/*" style="display:none;">
              <button class="btn btn-outline full-width" onclick="document.getElementById('videoInput').click()">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <polygon points="23 7 16 12 23 17 23 7"></polygon>
                  <rect x="1" y="5" width="15" height="14" rx="2" ry="2"></rect>
                </svg>
                Upload Video
              </button>
            </div>

            <!-- Live Camera -->
            <div class="tab-content" id="live-tab">
              <!-- ðŸŸ¢ START BUTTON -->
              <button class="btn btn-outline full-width" id="startLiveBtn">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"></path>
                  <circle cx="12" cy="13" r="4"></circle>
                </svg>
                Start Live Detection
              </button>

              <!-- ðŸ”´ STOP BUTTON -->
              <button class="btn btn-danger full-width" id="stopLiveBtn" style="display:none;">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <rect x="6" y="6" width="12" height="12" rx="2" ry="2"></rect>
                </svg>
                Stop Live Detection
              </button>
            </div>

            <!-- Live Preview Area -->
            <div class="preview" id="preview">
              <video id="video" autoplay playsinline muted style="display:none;"></video>
              <img id="uploadedImage" alt="preview" style="display:none;" />
              <canvas id="canvas"></canvas>
            </div>
          </div>
        </div>

        <!-- Sidebar Cards (Health + Control) -->
        <div class="sidebar-cards">
          <!-- System Health -->
          <div class="card">
            <div class="card-header">
              <h2>System Health</h2>
              <span class="badge badge-success" id="statusBadge">
                <span class="status-dot"></span>
                Online
              </span>
            </div>
            <div class="card-content">
              <div class="stat-row">
                <div class="stat-label">CPU Load</div>
                <span class="stat-value" id="cpuLoad">0%</span>
              </div>
              <div class="progress"><div class="progress-bar" id="cpuBar" style="width:0%"></div></div>

              <div class="stat-row">
                <div class="stat-label">GPU Load</div>
                <span class="stat-value" id="gpuLoad">0%</span>
              </div>
              <div class="progress"><div class="progress-bar" id="gpuBar" style="width:0%"></div></div>

              <div class="stat-row model-version">
                <div class="stat-label">Model Version</div>
                <span class="badge" id="modelBadge">YOLOv8n</span>
              </div>
            </div>
          </div>

          <!-- Control Panel -->
          <div class="card">
            <div class="card-header"><h2>Control Panel</h2></div>
            <div class="card-content">
              <button class="btn btn-primary full-width" id="monitoringBtn">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <polygon points="5 3 19 12 5 21 5 3"></polygon>
                </svg>
                Start Monitoring
              </button>
              <div class="form-group">
                <label for="modelSelect">Model Version</label>
                <select id="modelSelect" class="select">
                  <option value="YOLOv8n">YOLOv8n (Fast)</option>
                  <option value="YOLOv8s">YOLOv8s (Accurate)</option>
                </select>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Middle Section -->
      <div class="grid grid-2">
        <!-- Activity Feed -->
        <div class="card">
          <div class="card-header"><h2>Activity Feed</h2></div>
          <div class="card-content">
            <div id="activityFeed" class="activity-feed">
              <p class="empty-state">No detections yet</p>
            </div>
          </div>
        </div>

        <!-- Real-time Chart -->
        <div class="card">
          <div class="card-header"><h2>Real-time Detections</h2></div>
          <div class="card-content"><canvas id="detectionChart"></canvas></div>
        </div>
      </div>

      <!-- Daily Report -->
      <div class="card">
        <div class="card-header"><h2>Daily Report</h2></div>
        <div class="card-content">
          <div class="stats-grid">
            <div class="stat-card stat-success">
              <div class="stat-number" id="withMaskCount">0</div>
              <div class="stat-label">With Mask</div>
            </div>
            <div class="stat-card stat-danger">
              <div class="stat-number" id="noMaskCount">0</div>
              <div class="stat-label">No Mask</div>
            </div>
            <div class="stat-card stat-warning">
              <div class="stat-number" id="incorrectCount">0</div>
              <div class="stat-label">Incorrect</div>
            </div>
          </div>

          <div class="chart-container"><canvas id="pieChart"></canvas></div>

          <div class="export-buttons">
            <button class="btn btn-outline" id="exportCsvBtn">Export CSV</button>
            <button class="btn btn-outline" id="exportPdfBtn">Export PDF</button>
          </div>
        </div>
      </div>
    </main>
  </div>

  <script src="dashboard.js"></script>
</body>
</html>
